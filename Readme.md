# LiveKit Agent Quickstart Guide code by Paul

Welcome to the LiveKit Agent Quickstart Guide! This document will guide you through what I did to set up an agent to join a room using LiveKit. Follow these steps carefully to ensure a smooth setup process.

Note that this agent only joins a newly created room once. Then will only join new rooms and will not join ones it has been in before.

### Prerequisites

Before you begin, ensure you have the following:

- An OpenAI API key. You can obtain one [here](https://openai.com/api/).
- A LiveKit Cloud project or a self-hosted instance of the LiveKit server.

### Setting Up Your Environment

1. **Create a Python Virtual Environment**

   First, create a directory for your project and navigate into it:

   ```bash
   mkdir agent-quickstart
   cd agent-quickstart
   ```

   Then, create a virtual environment named `liveKitAgentDemoSimple`:

   ```bash
   python3 -m venv liveKitAgentDemoSimple
   ```

   Activate the virtual environment:

   ```bash
   source liveKitAgentDemoSimple/bin/activate
   ```

2. **Install LiveKit Agents and Dependencies**

   Install LiveKit, LiveKit Agents, and necessary plugins using pip:

   ```bash
   pip3 install livekit livekit-agents livekit-plugins-silero livekit-plugins-openai
   ```

### Writing Your Agent

1. **Create Your Agent File**

   Create a file named `agent.py` in your project directory. This file will contain the code for your agent. You can find a detailed example of what to include in this file in the [LiveKit documentation](https://docs.livekit.io/agents/quickstart/#3-Agent-code).
   As a supliment to the explaination in the documentation here is a chatGPT conversation about this code [ChatGPT Coversation](https://chat.openai.com/share/6f858901-5a1e-417d-880b-8f3fdfebd60c)

### Running Your Agent

1. **Set Environment Variables**

   Before running your agent, you need to set several environment variables. Replace the placeholders with your actual values:

   ```bash
   export LIVEKIT_URL=<add_your_ws_url_here>
   export LIVEKIT_API_KEY=<add_your_api_key_here>
   export LIVEKIT_API_SECRET=<add_your_api_secret_here>
   export OPENAI_API_KEY=<add_your_openai_api_key_here>
   ```

   If you go to the [Agent environmental vairables section](https://docs.livekit.io/agents/quickstart/#Running-the-Agent) while logged in to your cloud profile these will be filled in for you by clicking the button that pop up in the box holding this code on hover.

   To set this I added it to the activate script that was generated by the `python3 -m venv liveKitAgentDemoSimple` command.

   ```bash
   # more code in this file
   .
   .
   .
   # unset irrelevant variables
    deactivate nondestructive

    VIRTUAL_ENV="/Users/paullockett/Documents/Code/LivekitDemo1/liveKitAgentDemoSimple"
    export VIRTUAL_ENV

    _OLD_VIRTUAL_PATH="$PATH"
    PATH="$VIRTUAL_ENV/bin:$PATH"
    export PATH

    export LIVEKIT_URL=<add_your_ws_url_here>
    export LIVEKIT_API_KEY=<add_your_api_key_here>
    export LIVEKIT_API_SECRET=<add_your_api_secret_here>
    export OPENAI_API_KEY=<add_your_openai_api_key_here>
    # unset PYTHONHOME if set
    # this will fail if PYTHONHOME is set to the empty string (which is bad anyway)
    # could use `if (set -u; : $PYTHONHOME) ;` in bash
    if [ -n "${PYTHONHOME:-}" ] ; then
    .
   .
   .
   # more code in this file
   ```

2. **Start Your Agent**

   With the environment variables set, you can now start your agent:

   ```bash
   python agent.py start
   ```

Your agent is now running and ready to join a room. You can test your agent's interaction with end-users in the same room via browser. For prototyping and testing, use the Agents Playground provided by LiveKit by using the credentials found here: https://docs.livekit.io/agents/quickstart/#Testing-the-Agent

For more detailed information and troubleshooting, refer to the [LiveKit Agents documentation](https://docs.livekit.io/agents/quickstart/).
